# 代理记账ERP系统 - TODO

## 项目信息

- **项目名称**: 代理记账ERP系统
- **技术栈**: Go + Gin + GORM + SQLite
- **创建日期**: 2026-01-04

---

## 项目依赖

```go
require (
    github.com/gin-gonic/gin v1.11.0
    gorm.io/gorm v1.31.1
    github.com/glebarez/sqlite v1.11.0
    gorm.io/datatypes v1.2.7
    github.com/xuri/excelize/v2 v2.8.0
)
```

---

## 已完成功能 (v0.4.0)

### 后端API
- [x] 项目初始化（目录结构、依赖安装）
- [x] 数据库层设计（GORM + SQLite）
- [x] 客户管理模块（CRUD + 搜索）
- [x] 任务管理模块（CRUD + 状态筛选）
- [x] 协议管理模块（CRUD + 状态筛选）
- [x] 收款管理模块（CRUD + 日期范围筛选）
- [x] 统计分析模块（概览统计、任务统计、收款统计）
- [x] CORS中间件配置
- [x] 统一响应格式
- [x] API文档

### 数据模型重构 (v0.2.0 - v0.4.0)
- [x] Person（人员信息）- 支持法定代表人/投资人/服务人员角色
- [x] Customer（客户信息）- 关联人员、协议、注册资本
- [x] Task（代办任务）
- [x] Agreement（代理记账协议）
- [x] Payment（收款记录）
- [x] BankAccount（对公账户）
- [x] CustomerInvestor（投资人关联表）

### 人员管理
- [x] 人员CRUD操作
- [x] 按角色类型筛选
- [x] 人员与企业双向关联查询
- [x] 身份证号唯一约束
- [x] 服务人员密码策略

### 客户管理增强
- [x] 客户类型（有限公司/个人独资/合伙/个体工商户）
- [x] 法定代表人关联
- [x] 投资人关联（含持股比例、出资记录）
- [x] 服务人员关联
- [x] 代理协议关联
- [x] 注册资本字段
- [x] 按人员搜索客户
- [x] 对公账户管理 (BankAccount)
- [x] 办税人关联
- [x] 纳税人信用等级
- [x] 社保号、渝快办密码、经营范围

### 导入导出功能 (v0.3.0)
- [x] Excel模板下载（人员、客户）
- [x] 人员Excel导入（支持冲突策略：skip/update/create_new）
- [x] 客户Excel导入（含关联人员和协议）
- [x] 人员Excel导出
- [x] 客户Excel导出（含关联信息和协议）

### 枚举值API (v0.4.0)
- [x] 客户类型选项接口
- [x] 信用等级选项接口
- [x] 账户类型选项接口

### 测试覆盖 (v0.4.0)
- [x] 控制器单元测试
- [x] 模型单元测试
- [x] 27个测试用例全部通过

---

## 待实现功能

### 高优先级
- [x] 用户登录和权限管理
- [ ] 前端Vue + Element-UI项目搭建
- [ ] 数据验证增强（输入格式校验）
- [ ] 错误处理优化
- [x] 密码加密存储（当前为明文）

### 中优先级
- [ ] 任务提醒功能（即将到期的任务）
- [ ] 协议到期提醒
- [ ] 操作日志记录
- [ ] 人员-客户关联自动同步优化

### 低优先级
- [ ] 数据备份功能
- [ ] 报表生成（月度/季度/年度统计报表）
- [ ] 文件上传（客户附件、合同扫描件等）
- [ ] 消息通知系统
- [ ] 数据可视化图表

---

## 功能扩展记录

### v0.5.0 (2026-01-05)
PersonType 重构与前端开发：
- 删除 PersonType 枚举类型
- Person 模型使用 IsServicePerson 布尔属性标识服务人员
- 法定代表人和投资人通过关联关系（RepresentativeCustomerIDs、InvestorCustomerIDs）确定
- 简化人员管理逻辑，移除冗余的类型判断
- 更新前后端 API 和导入导出功能
- 添加跨平台构建脚本（build.sh、build.bat、build.ps1）
- 支持 linux/amd64、linux/arm64、linux/armv7、windows/amd64 平台
- 新增Vue 3 + TypeScript + Vite前端项目
- 集成Element Plus UI组件库
- 完成所有核心页面开发（登录、Dashboard、人员、客户、任务、协议、收款、导入导出）
- 实现Go embed静态资源嵌入
- 配置Gin静态资源路由
- 支持单文件可执行程序部署
- 修复所有TypeScript编译错误

### v0.4.0 (2026-01-07)
Customer模型重构：
- 新增BankAccount表（对公账户管理）
- 新增CustomerInvestor表（投资人关联，替代JSON字段）
- Customer新增字段：办税人ID、信用等级、社保号、渝快办密码、经营范围
- Person新增字段：TaxAgentCustomerIDs（办税人反向关联）
- 新增枚举值API端点：客户类型、信用等级、账户类型
- 使用纯Go SQLite驱动(glebarez/sqlite)替代CGO依赖
- 添加完整的单元测试（27个测试用例全部通过）

### v0.3.0 (2026-01-05)
导入导出功能：
- 新增Excel导入导出服务
- 支持人员和客户模板下载
- 支持批量导入人员和客户数据
- 客户导入时自动创建法定代表人和投资人
- 导出时包含关联人员信息
- 所有枚举值改为中文存储

### v0.2.0 (2026-01-04)
数据模型重构：
- 新增Person表，统一管理法定代表人、投资人、服务人员
- Customer表增加人员关联字段和客户类型
- 支持投资人多次出资记录（JSON扩展）
- 实现人员与企业双向查询

---

## 已知问题

> 在这里记录发现的问题

---

## 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| v0.5.0 | 2026-01-05 | PersonType重构与前端开发完成 |
| v0.4.0 | 2026-01-07 | Customer模型重构，新增对公账户、办税人等字段 |
| v0.3.0 | 2026-01-05 | 新增Excel导入导出功能 |
| v0.2.0 | 2026-01-04 | 数据模型重构，新增人员管理 |
| v0.1.0 | 2026-01-04 | 后端API基础功能完成 |
